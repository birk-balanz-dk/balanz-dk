<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alle Angebote - SmartBalanz.dk</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'balanz-green': '#7B9B7D',
                        'balanz-blue': '#A8C4D0', 
                        'balanz-beige': '#f9f2e8'
                    }
                }
            }
        }
    </script>
</head>
<body class="font-sans bg-balanz-beige">
    <!-- Navigation -->
    <nav class="shadow-sm bg-balanz-beige">
        <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
            <a href="/">
                <img src="/images/header-logo.png" alt="Balanz.dk" class="h-8 sm:h-10 w-auto">
            </a>
            <div class="flex gap-2 sm:gap-4">
                <a href="/deals.html" class="bg-balanz-green text-white px-4 py-2 rounded-full text-sm font-semibold hover:bg-opacity-90 transition-all flex items-center gap-2">
    <img src="/images/flag-dk.png" alt="DK" class="w-4 h-3">
    <span>Dansk</span>
</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="max-w-7xl mx-auto px-4 py-8 sm:py-16">
        <div class="grid lg:grid-cols-2 gap-8 sm:gap-12 items-center">
            <!-- Hero Image -->
            <div class="order-2 lg:order-1">
                <img src="/images/deals.png" alt="Browse all current deals" class="w-full max-w-sm sm:max-w-md mx-auto rounded-3xl shadow-lg">
            </div>
            
            <!-- Hero Text -->
            <div class="order-1 lg:order-2 text-center lg:text-left">
                <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-gray-800 mb-4 sm:mb-6 leading-tight">
                    AKTUELLE<br>
                    <span class="text-balanz-green">ANGEBOTE</span>
                </h1>
                
                <p class="text-lg sm:text-xl text-gray-600 mb-4 max-w-lg mx-auto lg:mx-0">
                    Die clevere Art im Urlaub einzukaufen
                </p>
				<p class="text-base text-gray-500 mb-6 sm:mb-8 max-w-lg mx-auto lg:mx-0">
Sie sind im D√§nemark-Urlaub? Wir zeigen Ihnen alle Wochenangebote der 6 gro√üen Supermarktketten ‚Äì damit Sie clever einkaufen und mehr vom Urlaub haben.</p>
                
<p class="text-lg sm:text-xl text-gray-600 mb-4 max-w-lg mx-auto lg:mx-0">
                    G√ºltigkeitsdatum</p>                   
				   
					<p Lidl - 16.-22. Nov.<br>
					Coop - 14.-20. Nov.<br>
					REMA 1000 - 16. -22. Nov.<br>
					365 Discount - 13.-19. Nov<br>
					F√∏tex - 14.-27. Nov.<br>
					Netto - 15.-21. Nov.
                </p>
            </div>
        </div>
		
    </section>
<section class="max-w-7xl mx-auto px-4 py-8">
    <!-- Feedback & Newsletter Widget -->
    <div class="bg-white rounded-xl shadow-md p-6 max-w-lg mx-auto">
    <h3 class="text-lg font-bold text-gray-800 mb-4">üì¨ Bleiben Sie informiert</h3>
    
    <!-- Newsletter Signup -->
    <div class="mb-4">
        <p class="text-sm text-gray-600 mb-3">M√∂chten Sie die Wochenangebote per E-Mail erhalten?</p>
        <button 
            onclick="window.open('https://forms.gle/bS6NN1etZvp3ZiD57', '_blank')"
            class="w-full bg-balanz-green text-white px-6 py-3 rounded-lg font-semibold hover:bg-opacity-90 transition-colors">
            üìß Zum Newsletter anmelden
        </button>
    </div>
    
    <!-- Divider -->
    <div class="border-t border-gray-200 my-4"></div>
    
    <!-- Quick Feedback -->
    <div>
        <p class="text-sm text-gray-600 mb-3">War diese Seite hilfreich?</p>
        <div class="flex gap-3">
            <button 
                onclick="window.open('https://forms.gle/AgNQfoSFqmSbs1Zb8', '_blank')"
                class="flex-1 bg-green-50 text-green-700 px-4 py-2 rounded-lg font-semibold hover:bg-green-100 transition-colors border border-green-200">
                üëç Ja
            </button>
            <button 
                onclick="window.open('https://forms.gle/AgNQfoSFqmSbs1Zb8', '_blank')"
                class="flex-1 bg-red-50 text-red-700 px-4 py-2 rounded-lg font-semibold hover:bg-green-100 transition-colors border border-red-200">
                üëé Nein
            </button>
        </div>
        <p class="text-xs text-gray-500 mt-2">Ihr Feedback √∂ffnet sich in einem neuen Fenster</p>
    </div>
</div>
</section>
    <!-- Filters Section -->
    <section class="max-w-7xl mx-auto px-4 py-4 sm:py-8">
        <div class="text-center mb-6 sm:mb-8">
            <div id="category-filters" class="flex flex-wrap justify-center gap-2 sm:gap-4">
                <button onclick="filterByCategory('all')" class="category-btn active bg-balanz-green text-white px-3 sm:px-4 py-2 rounded-full text-sm font-semibold">
                    Alle Kategorien
                </button>
                <!-- Dynamic category buttons will be added here -->
            </div>
        </div>
    </section>

    <!-- Deals List -->
    <div class="max-w-7xl mx-auto px-4 mb-4 sm:mb-6 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 sm:gap-4">
        <div class="text-gray-600 text-center sm:text-left">
            <span id="deals-count" class="font-bold">0</span> Angebote gefunden
        </div>
        <div class="flex flex-col sm:flex-row gap-3 sm:gap-4 items-center">
            <button onclick="printDeals()" 
                    class="w-full sm:w-auto bg-balanz-green text-white px-4 py-2 rounded-lg hover:bg-opacity-90 transition-colors flex items-center justify-center space-x-2">
                <span>üñ®Ô∏è</span>
                <span>Angebote drucken</span>
            </button>
            <select id="sort-select" onchange="sortDeals()" class="w-full sm:w-auto bg-white border border-gray-300 rounded-lg px-4 py-2">
                <option value="">Sortieren nach</option>
                <option value="store">Supermarkt (inkl. Kategorie)</option>
                <option value="category">Kategorien</option>
            </select>
        </div>
    </div>

    <!-- Simple List Container -->
    <div class="max-w-7xl mx-auto px-4">
        <div class="bg-white rounded-lg shadow-sm border border-balanz-blue overflow-hidden">
            <div id="deals-container" class="max-h-96 overflow-y-auto">
                <div class="p-6 text-center text-gray-500">
                    Angebote werden geladen...
                </div>
            </div>
        </div>

        <!-- CTA Section -->
        <div class="text-center mt-8 sm:mt-12 p-6 sm:p-8 bg-white rounded-2xl shadow-sm">
            <h3 class="text-xl sm:text-2xl font-bold text-gray-800 mb-3 sm:mb-4">Genie√üen Sie Ihren Urlaub ‚Äì wir k√ºmmern uns um die besten Angebote!</h3>
            <p class="text-gray-600 mb-4 sm:mb-6">Alle Wochenangebote von 6 d√§nischen Supermarktketten auf einen Blick</p>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 sm:py-12 mt-8">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <div class="mb-4 text-sm sm:text-base">
                ¬© 2025 SmartBalanz.dk - Die clevere Art in D√§nemark einzukaufen
            </div>
            <div class="mb-4 flex flex-col sm:flex-row justify-center items-center gap-2 sm:gap-0">
                <a href="/privacy-de.html" class="text-gray-300 hover:text-balanz-green transition-colors text-sm sm:mx-4">Datenschutz</a>
<span class="hidden sm:inline text-gray-500">|</span>
<a href="/privacy-de.html" class="text-gray-300 hover:text-balanz-green transition-colors text-sm sm:mx-4">Nutzungsbedingungen</a>
                <span class="hidden sm:inline text-gray-500">|</span>
                <a href="mailto:smartbalanzdk@gmail.com" class="text-gray-200...">Kontakt</a>
            </div>
            <div class="text-gray-400 text-sm">
                Mit ‚ù§Ô∏è in D√§nemark gemacht
            </div>
        </div>
    </footer>

    <script>
        let allDeals = [];
        let filteredDeals = [];
        let currentCategoryFilter = 'all';
        let uniqueCategories = new Set();

        // German translation mapping
        const categoryTranslations = {
            'Bakery & Bread': 'B√§ckerei',
            'Beverages': 'Getr√§nke',
            'Dairy & Eggs': 'Milchprodukte',
            'Fish & Seafood': 'Fisch',
            'Frozen Foods': 'Tiefk√ºhlkost',
            'Fruits & Vegetables': 'Obst & Gem√ºse',
            'Meat & Poultry': 'Fleisch',
            'Pantry Items': 'Grundnahrungsmittel',
            'Organic': 'Bio'
        };

        document.addEventListener('DOMContentLoaded', function() {
            loadDeals();
        });

        async function loadDeals() {
            try {
                const response = await fetch('/api/deals');
                const data = await response.json();
                
                if (data && Array.isArray(data)) {
                    allDeals = data;
                } else if (data && data.deals && Array.isArray(data.deals)) {
                    allDeals = data.deals;
                } else if (data && data.success && data.deals) {
                    allDeals = data.deals;
                } else {
                    console.error('Unexpected data structure:', data);
                    allDeals = [];
                }
                
                allDeals.forEach(deal => {
                    if (deal.category) uniqueCategories.add(deal.category);
                });
                
                createCategoryFilters();
                
                filteredDeals = [...allDeals];
                renderDeals();
                updateDealsCount();
                
            } catch (error) {
                console.error('Error loading deals:', error);
                document.getElementById('deals-container').innerHTML = 
                    '<div class="p-6 text-center text-red-500">Angebote konnten nicht geladen werden. Bitte versuchen Sie es sp√§ter erneut.</div>';
            }
        }

        function createCategoryFilters() {
            const filterContainer = document.getElementById('category-filters');
            const allButton = filterContainer.querySelector('.category-btn');
            
            Array.from(uniqueCategories).sort().forEach(category => {
                const button = document.createElement('button');
                button.onclick = () => filterByCategory(category);
                button.className = 'category-btn bg-white text-gray-700 px-3 sm:px-4 py-2 rounded-full text-sm font-semibold border hover:bg-gray-50';
                
                const germanLabel = categoryTranslations[category] || category;
                button.textContent = germanLabel;
                button.setAttribute('data-category', category);
                
                filterContainer.appendChild(button);
            });
        }

        function filterByCategory(category) {
            currentCategoryFilter = category;
            updateActiveButton('.category-btn', event.target);
            applyFilters();
        }

        function updateActiveButton(selector, activeBtn) {
            document.querySelectorAll(selector).forEach(btn => {
                btn.classList.remove('active', 'bg-balanz-green', 'text-white');
                btn.classList.add('bg-white', 'text-gray-700');
            });
            
            activeBtn.classList.add('active', 'bg-balanz-green', 'text-white');
            activeBtn.classList.remove('bg-white', 'text-gray-700');
        }

        function applyFilters() {
            filteredDeals = allDeals.filter(deal => {
                if (currentCategoryFilter === 'all') return true;
                return deal.category === currentCategoryFilter;
            });
            
            sortDeals();
        }

        function sortDeals() {
            const sortBy = document.getElementById('sort-select').value;
            
            if (sortBy === 'store') {
                filteredDeals.sort((a, b) => {
                    const storeA = a.store || 'Unbekannt';
                    const storeB = b.store || 'Unbekannt';
                    const storeCompare = storeA.localeCompare(storeB);
                    if (storeCompare !== 0) return storeCompare;
                    return (a.category || '').localeCompare(b.category || '');
                });
            } else if (sortBy === 'category') {
                filteredDeals.sort((a, b) => {
                    const categoryCompare = (a.category || '').localeCompare(b.category || '');
                    if (categoryCompare !== 0) return categoryCompare;
                    return (a.title || '').localeCompare(b.title || '');
                });
            }
            
            renderDeals();
            updateDealsCount();
        }

        function renderDeals() {
            const container = document.getElementById('deals-container');
            
            if (filteredDeals.length === 0) {
                container.innerHTML = '<div class="p-6 text-center text-gray-500">Keine Angebote mit den gew√§hlten Filtern gefunden</div>';
                return;
            }
            
            const dealsList = filteredDeals.map((deal, index) => {
                const displayCategory = categoryTranslations[deal.category] || deal.category;
                
                return `
                <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center py-4 px-4 sm:px-6 ${index % 2 === 0 ? 'bg-gray-50' : 'bg-white'} hover:bg-balanz-beige transition-colors border-b border-gray-100 last:border-b-0">
                    <div class="flex-1 mb-2 sm:mb-0">
                        <div class="font-medium text-gray-800 mb-1">${deal.title || 'Unbekanntes Produkt'}</div>
                        <div class="text-sm text-gray-500 flex flex-wrap gap-2">
                            <span>${deal.amount || ''}</span>
                            <span class="font-medium text-balanz-green">${deal.store || 'Unbekannter Markt'}</span>
                        </div>
                    </div>
                    <div class="flex items-center justify-between sm:justify-end gap-3 sm:gap-4">
                        <span class="text-xs bg-gray-100 px-2 py-1 rounded whitespace-nowrap">${displayCategory}</span>
                        <span class="font-bold text-balanz-green text-lg">${deal.price || 'Siehe Preis'}</span>
                    </div>
                </div>
            `}).join('');
            
            container.innerHTML = dealsList;
        }

        function updateDealsCount() {
            document.getElementById('deals-count').textContent = filteredDeals.length;
        }

        function printDeals() {
            localStorage.setItem('filteredDeals', JSON.stringify(filteredDeals));
            window.open('/print-deals-list.html?autoprint=true', '_blank', 'width=800,height=600');
        }
    </script>
	<!-- Default Statcounter code for SmartBalanz-Deutsch
https://www.smartbalanz.dk/deals-de.html -->
<script type="text/javascript">
var sc_project=13183215; 
var sc_invisible=1; 
var sc_security="64f177a5"; 
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js"
async></script>
<noscript><div class="statcounter"><a title="Web Analytics"
href="https://statcounter.com/" target="_blank"><img
class="statcounter"
src="https://c.statcounter.com/13183215/0/64f177a5/1/"
alt="Web Analytics"
referrerPolicy="no-referrer-when-downgrade"></a></div></noscript>
<!-- End of Statcounter Code -->
</body>
</html>